# Скрипты автоматизации

Эта папка содержит скрипты для автоматизации процессов разработки и релизов.

## Скрипты

### 1. `create-release.ps1` (PowerShell)

**Платформа**: Windows  
**Описание**: Автоматическое создание релиза и публикация NuGet пакета

**Использование**:

```powershell
# Создать релиз с текущей версией из проекта
.\create-release.ps1

# Создать релиз с указанной версией
.\create-release.ps1 1.3.1
```

**Функции**:

- Автоматическое определение версии из `.csproj` файла
- Проверка статуса git репозитория
- Создание и отправка тега версии
- Открытие GitHub Actions в браузере
- Интерактивные подсказки

### 2. `create-release.sh` (Bash)

**Платформа**: Linux, macOS  
**Описание**: Аналогичный функционал для Unix-систем

**Использование**:

```bash
# Сделать исполняемым (только при первом использовании)
chmod +x create-release.sh

# Создать релиз с текущей версией из проекта
./create-release.sh

# Создать релиз с указанной версией
./create-release.sh 1.3.1
```

## Как это работает

### Процесс создания релиза

1. **Проверка окружения**:
   - Проверка текущей ветки (должна быть `main`)
   - Проверка статуса git (рекомендуется чистый репозиторий)
   - Определение версии из проекта

2. **Создание тега**:
   - Создание аннотированного git тега
   - Отправка тега на GitHub

3. **Автоматизация**:
   - GitHub Actions автоматически запускается при push тега
   - Выполняются все тесты
   - После успешных тестов публикуется NuGet пакет
   - Создается GitHub Release

### Требования

- Git репозиторий с настроенным remote origin
- Доступ к GitHub Actions
- Настроенный секрет `NUGET_API_KEY` в GitHub
- Ветка `main` как основная

### Безопасность

- Скрипты проверяют текущую ветку
- Предупреждают о несохраненных изменениях
- Требуют подтверждения для критических операций

## Интеграция с GitHub Actions

Скрипты работают в связке с workflow `nuget-publish.yml`:

1. **Создание тега** → **Автозапуск workflow**
2. **Выполнение тестов** → **Проверка качества**
3. **Публикация пакета** → **NuGet.org**
4. **Создание релиза** → **GitHub Releases**

## Troubleshooting

### Ошибка "Не удалось определить версию"

- Убедитесь, что файл `MarchSeven/MarchSeven.csproj` существует
- Проверьте, что тег `<AssemblyVersion>` присутствует в проекте

### Ошибка "Неверный формат версии"

- Используйте семантическое версионирование: `X.Y.Z`
- Примеры: `1.3.0`, `2.0.1`, `1.3.1`

### Проблемы с git

- Убедитесь, что у вас есть права на push в репозиторий
- Проверьте, что remote origin настроен правильно
- Убедитесь, что вы находитесь на ветке `main`

### Workflow не запускается

- Проверьте, что тег начинается с `v` (например, `v1.3.1`)
- Убедитесь, что секрет `NUGET_API_KEY` настроен в GitHub
- Проверьте логи в GitHub Actions
